<div class="create-wpt-wrapper">
    <mat-card class="wpt-module-card" style="padding: 0px;">
        <mat-toolbar color="mat-blue-grey" class="create-wpt-toolbar wo-details">
            <mat-toolbar-row class="mat-blue-grey">
                <div class=" pl-0 wo-header" fxFlex="95">
                    <div class="header">Create New Workorder</div>
                </div>
                <div class="sector-flex-item" fxFlex="5">
                    <mat-icon style="line-height: 0; font-size: 21px;color: rgba(0,0,0,0.54);float: right;">
                        <span class="ic ic-Go-to-Workorder-Icon-1"></span>
                    </mat-icon>
                </div>
            </mat-toolbar-row>
        </mat-toolbar>

        <mat-divider></mat-divider>

        <ng-container *ngIf="createNewWorkorder === 'CREATENEWWO'" [ngTemplateOutlet]="CreateNewWorkorder">
        </ng-container>
        <ng-container *ngIf="createNewWorkorder === 'BULKUPLOAD'" [ngTemplateOutlet]="BulkUpload"></ng-container>

        <ng-template #CreateNewWorkorder>
            <div class="d-flex flex-row justify-content-between wpt-container">
                <div fxFlex="50" style="border-right: 1px solid #D3D5DC;">
                    <div class="sub-content d-flex mar-top flex-row flex-wrap" style="margin-bottom: 13px;">
                        <div class="sub-content-flex-item  col-6">
                            <div class="form-read-only">
                                <label class="input-label">Template Type*</label>
                                <div class="input-value">
                                    Regulatory Reporting
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="sub-content d-flex  flex-row flex-wrap">
                        <div class="sub-content-flex-item  col-6">
                            <div class="form-read-only">
                                <label class="input-label">Workorder Id*</label>
                                <div class="input-value">
                                    RR-1221-MU-7359301
                                </div>
                            </div>
                        </div>

                        <div class="sub-content-flex-item  col-6">
                            <mat-form-field class="form-field-read-only">
                                <mat-label
                                    style="font-family: Lato Regular; font-size: 16px;color: #000000;opacity: 0.54;">
                                    Type*</mat-label>
                                <mat-select disableOptionCentering [(value)]="type[1]"
                                    style="font-family: lato Regular; font-size: 14px;">
                                    <mat-option value="option1" class="sector-title" *ngFor="let st of type"
                                        [value]="st">
                                        {{st}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                    </div>
                    <div class="sub-content d-flex  flex-row flex-wrap" style="border-bottom: 1px solid #D3D5DC;">
                        <div class="sub-content-flex-item col-12">
                            <div class="col-6 wo-inline">
                                <button class="next-button p-0" mat-button color="primary" (click)="bulkUpload()">
                                    <i style="font-size: 14px;" class="ic ic-upload4 file-icon pr-2">
                                    </i>
                                    <span>Bulk Upload</span>
                                </button>
                            </div>
                            <div class="col-6 wo-inline">
                                <section>
                                    <mat-checkbox class="example-margin" (click)="nbhWo()">NBH WO</mat-checkbox>
                                </section>
                            </div>

                        </div>
                    </div>

                    <div class="sub-content d-flex  flex-row flex-wrap">
                        <div class="label-header w-100">Date & Time Range</div>
                        <div class="wo-sector-card-one  col-6" style="display: inline-block">
                            <form [formGroup]="thirdFormGroup">
                                <mat-form-field class="custom-field-container" fxFlex>
                                    <div class="daterange-container">
                                        <input matInput ngxDaterangepickerMd placeholder="Select Range"
                                            [timePicker]="false" [timePickerSeconds]="false" [timePickerIncrement]="15"
                                            [timePicker24Hour]="false" formControlName="selectedDateTime"
                                            [showCustomRangeLabel]="true"
                                            [alwaysShowCalendars]="thirdFormGroup.get('alwaysShowCalendars').value"
                                            [showClearButton]="true" [showCancel]="true" [linkedCalendars]="false"
                                            [isTooltipDate]="isTooltipDate" [isInvalidDate]="isInvalidDate"
                                            [locale]="{ applyLabel: 'Ok', format: 'MMM DD, YYYY',clearLabel:'Clear'}"
                                            [keepCalendarOpeningWithRange]="thirdFormGroup.get('keepCalendarOpeningWithRange').value"
                                            [showRangeLabelOnInput]="thirdFormGroup.get('showRangeLabelOnInput').value"
                                            (rangeClicked)="rangeClicked($event)" (datesUpdated)="datesUpdated($event)"
                                            autocomplete="off" [opens]="opens" [drops]="drops"
                                            class="daterange-container-input" />
                                        <div class="iconCal"><i class="zmdi zmdi-calendar"></i></div>
                                    </div>
                                </mat-form-field>
                            </form>
                        </div>

                        <div class="wo-sector-card-one  col-5" style="display: inline-block">
                            <label class="time-duration-label">Start Time</label>
                            <div>

                                <mat-select class="timer-select" disableOptionCentering [(value)]="timeSeletedHour">
                                    <mat-option value="option1" class="sector-title" *ngFor="let h of hours"
                                        [value]="h">
                                        {{h}}</mat-option>
                                </mat-select>

                                <mat-select class="timer-select" disableOptionCentering [(value)]="timeSeletedMin">
                                    <mat-option value="option1" class="sector-title" *ngFor="let m of minutes"
                                        [value]="m">
                                        {{m}}</mat-option>
                                </mat-select>

                                <mat-select class="timer-select" disableOptionCentering [(value)]="timeSeletedSec">
                                    <mat-option value="option1" class="sector-title" *ngFor="let s of sec" [value]="s">
                                        {{s}}</mat-option>
                                </mat-select>

                                <mat-select class="timer-select am-pm" disableOptionCentering
                                    [(value)]="hoursSeletedAMPM">
                                    <mat-option value="option1" class="sector-title" *ngFor="let ap of ampm"
                                        [value]="ap">
                                        {{ap}}</mat-option>
                                </mat-select>
                            </div>
                        </div>
                    </div>

                    <div class="sub-content d-flex flex-row flex-wrap"
                        style="padding-bottom: 13px; border-bottom: 1px solid #D3D5DC;">
                        <div class="sub-content-flex-item  col-6">
                            <div class="form-read-only">
                                <label class="input-label">Iterations</label>
                                <div class="input-value">
                                    10
                                </div>
                            </div>
                        </div>

                        <div class="sub-content-flex-item  col-6">
                            <div class="form-read-only">
                                <label class="input-label">Waiting Period</label>
                                <div class="input-value">
                                    In Seconds|
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="sub-content d-flex  flex-row flex-wrap" style="margin: 13px 0;">

                        <div class="label-header w-100">Geography</div>

                        <div class="sub-content-flex-item  col-6">
                            <mat-form-field class="form-field-read-only">
                                <mat-label
                                    style="font-family: Lato Regular; font-size: 16px;color: #000000;opacity: 0.54;">
                                    Select Zone*</mat-label>
                                <mat-select disableOptionCentering [(value)]="selectZone[1]"
                                    style="font-family: lato Regular; font-size: 14px;">
                                    <mat-option value="option1" class="sector-title" *ngFor="let st of selectZone"
                                        [value]="st">
                                        {{st}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="sub-content-flex-item  col-6">
                            <mat-form-field class="form-field-read-only">
                                <mat-label
                                    style="font-family: Lato Regular; font-size: 16px;color: #000000;opacity: 0.54;">
                                    Select Circle*</mat-label>
                                <mat-select disableOptionCentering [(value)]="selectCircle[1]"
                                    style="font-family: lato Regular; font-size: 14px;">
                                    <mat-option value="option1" class="sector-title" *ngFor="let st of selectCircle"
                                        [value]="st">
                                        {{st}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="sub-content d-flex  flex-row flex-wrap" style="margin: 0 15px;">
                        <mat-form-field class="w-100">
                            <mat-label>Description</mat-label>
                            <input matInput>
                        </mat-form-field>
                    </div>
                </div>

                <div fxFlex="50">
                    <div class="d-flex  flex-row flex-wrap">
                        <div class="sub-content-flex-item col-12" style="padding: 0px !important;">
                            <ag-grid-angular (gridReady)="onGridReady($event)"
                                class="ag-theme-material table-view-zoom-ag-grid"
                                style="width: 100%; height: 344px;border: 1px solid #eee;" rowHeight="48"
                                headerHeight="48" [gridOptions]="gridOptions" [columnDefs]="columnDefs"
                                [rowData]="rowData" enableColResize groupHeaders
                                (selectionChanged)="selectionChanged($event)" [suppressCellSelection]="true"
                                toolPanelSuppressGroups toolPanelSuppressValues rowSelection="multiple"
                                [suppressRowClickSelection]="true" [debug]="true" [enableRangeSelection]="true"
                                [pagination]="false" [paginationAutoPageSize]="false"
                                [frameworkComponents]="frameworkComponentsTaskDetails"
                                (gridReady)="onGridReady($event)">
                            </ag-grid-angular>
                        </div>
                    </div>

                    <div *ngIf="showUploadDevices" class="sub-content d-flex  flex-row flex-wrap">
                        <div class="col">
                            <mat-form-field fxFlex="80" class="browse-file-form-field">
                                <input matInput class="input-field" placeholder="" [(ngModel)]="fileName"
                                    [readonly]="true" required>
                                <button style="position: absolute; right: 0; bottom: 0;" class="browse-button"
                                    (click)="onClick()" mat-icon-button color="primary"><i
                                        class="ic ic-file"></i></button>
                            </mat-form-field>
                            <input type="file" #fileUpload id="fileUpload" name="fileUpload" accept=""
                                style="display: none;" />

                            <button fxFlex="20" class="next-button p-0" mat-button color="primary">
                                <i style="font-size: 14px;" class="ic ic-upload4 file-icon pr-2">
                                </i>
                                <span>Upload</span>
                            </button>

                        </div>
                    </div>

                    <div *ngIf="showUploadDevices" class="sub-content-flex-item col-12">
                        <div class="upload-instruction upload-select-device" style="margin-left: 13px;" fxFlex="70">
                            note: upload csv files only</div>
                    </div>

                    <div class="d-flex  flex-row flex-wrap">
                        <div class="col" style="border: 1px solid rgb(226 226 226); padding: 0px !important;">
                            <ag-grid-angular style="width: 100%; height: 285px"
                                class="traceport-activation ag-theme-material ag-jcp3"
                                [tooltipShowDelay]="tooltipShowDelay" [rowData]="rowDataSelectDevice"
                                [columnDefs]="columnDefsSelectDevice" [groupHeaderHeight]="47" [headerHeight]="47"
                                [gridOptions]="gridOptionsSelectDevice" [suppressHorizontalScroll]="true"
                                (gridReady)="onGridReady($event)">
                            </ag-grid-angular>
                        </div>

                        <div *ngIf="showCopyToNewWorkorder" class="download-device w-100">
                            <button mat-button class="icon-container-button" color="primary"><i
                                    class="ic ic-download pr-2"></i>Download</button>
                        </div>
                    </div>
                </div>

            </div>
        </ng-template>


        <ng-template #BulkUpload>
            <div class="d-flex justify-content-between wpt-container" style="height: 89px;">
                <div fxFlex>
                    <div class="sub-content d-flex mar-top flex-row flex-wrap">
                        <div class="sub-content-flex-item  col-3">
                            <div class="form-read-only">
                                <label class="input-label">Template Type*</label>
                                <div class="input-value">
                                    Regulatory Reporting
                                </div>
                            </div>
                        </div>

                        <div class="sub-content-flex-item  col-3">
                            <div class="form-read-only">
                                <label class="input-label">Workorder Id*</label>
                                <div class="input-value">
                                    RR-1221-MU-7359301
                                </div>
                            </div>
                        </div>

                        <div class="sub-content-flex-item  col-3">
                            <mat-form-field class="form-field-read-only">
                                <mat-label
                                    style="font-family: Lato Regular; font-size: 16px;color: #000000;opacity: 0.54;">
                                    Type*</mat-label>
                                <mat-select disableOptionCentering [(value)]="type[1]"
                                    style="font-family: lato Regular; font-size: 14px;">
                                    <mat-option value="option1" class="sector-title" *ngFor="let st of type"
                                        [value]="st">
                                        {{st}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </div>

            </div>

            <div class="d-flex flex-row" style="height: calc(100% - 150px);">
                <ag-grid-angular (gridReady)="onGridReady($event)" class="ag-theme-material table-view-zoom-ag-grid"
                    style="width: 100%; height: 100%" rowHeight="48" headerHeight="48"
                    [gridOptions]="gridOptionsBulkOrder" [columnDefs]="columnDefsBulkOrder" [rowData]="rowDataBulkOrder"
                    enableColResize groupHeaders [suppressCellSelection]="true" toolPanelSuppressGroups
                    toolPanelSuppressValues rowSelection="multiple" [suppressRowClickSelection]="true" [debug]="true"
                    [enableRangeSelection]="true" [pagination]="false" [paginationAutoPageSize]="false"
                    [frameworkComponents]="frameworkRegulatory">
                </ag-grid-angular>
            </div>
        </ng-template>
    </mat-card>
</div>

<div class="d-flex">
    <div class="p-2 mr-auto" *ngIf="createNewWorkorder === 'CREATENEWWO'">
        <button mat-stroked-button color="primary" class="buttonWidth" (click)="navigateBack()">Back</button>
    </div>

    <div class="p-2 mr-auto" *ngIf="createNewWorkorder === 'BULKUPLOAD'">
        <button mat-stroked-button color="primary" class="buttonWidth" (click)="navigateBackToCreateWO()">Back</button>
    </div>

    <div class="p-2">
        <button mat-raised-button color="primary" (click)="assignWorkorder()" class="buttonWidth button">Assign</button>
    </div>
</div>