<nav id="nav-menu" mmenu #varWithDirective="mmenuDirectiveExport">
    <ul class="listview-icons">
        <li *ngFor="let item of menuListAll">
            <ng-container 
                [ngTemplateOutlet]="recursiveListTmpl" 
                [ngTemplateOutletContext]="{item:item}">
            </ng-container>
        </li>
    </ul>
    <ng-template #recursiveListTmpl let-item='item'>
            <span routerLink="/{{item.link}}" *ngIf="item.children.length > 0"
                routerLinkActive="menu-active">
                <i class="{{item.icon}}"
                    *ngIf="item.level == 0"
                    attr.data-title="{{item.name}}"
                    ></i>
                <span attr.data-title="{{item.name.length > 23 ? item.name : null}}">
                    {{item.name}}
                </span>
            </span>
            <a routerLink="/{{item.link}}" *ngIf="item.children.length == 0"
            (click)="parentIconClick(varWithDirective, item.level)" routerLinkActive="menu-active">
                <i class="{{item.icon}} level0Item"
                    *ngIf="item.level == 0"
                    attr.data-title="{{item.name}}"
                    ></i>
                <span attr.data-title="{{item.name.length > 21 ? item.name : null}}">
                    {{item.name}}
                </span>
            </a>
            <div *ngIf="item.children.length > 0 && item.name !='Layers'" class="listview-icons">
                <ul>
                <li *ngFor="let item of item.children; let i= index" 
                id="{{item.name.split(' ').join('_')}}">
                <ng-container 
                    [ngTemplateOutlet]="recursiveListTmpl" 
                    [ngTemplateOutletContext]="{item:item}">
                </ng-container>
                </li>
            </ul>
            </div>
            <ul *ngIf="item.children.length > 0 && item.name =='Layers'" class="listview-icons">
                <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
                    <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding matTreeNodeToggle
                    matTreeNodePaddingIndent="12" (mouseover)="layersLevelHover(node, '')"
                    (mouseleave)="layersLevelHoverLeave(node, '')" [ngStyle]="{'cursor':'pointer'}"
                    [ngClass]="[hoverLayer0? 'layers-menu-0': '']">
                        <button mat-icon-button disabled></button>
                        <div class="name-node">{{node.name}}</div>
                    </mat-tree-node>
                    <mat-tree-node *matTreeNodeDef="let node;when: hasChild;" matTreeNodePadding
                    matTreeNodeToggle (click)="activenode(node)" (mouseover)="layersLevelHover(node, iconlayers)"
                    (mouseleave)="layersLevelHoverLeave(node, iconlayers)" matTreeNodePaddingIndent="12" [ngStyle]="{'cursor':'pointer'}"
                    [ngClass]="[hoverLayer0? 'layers-menu-0': '']">
                        <button mat-icon-button matTreeNodeToggle
                                [attr.aria-label]="'toggle ' + node.name" (click)="activenode(node)" 
                                (mouseover)="layersLevelHover(node, iconlayers)" [disableRipple]="true">
                        <mat-icon class="mat-icon-rtl-mirror"
                        [ngStyle]="{'margin-left': '-'+(node.level)*24+'px'}" #iconlayers>
                            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                        </mat-icon>
                        </button>
                        <div class="name-node">{{node.name}}</div>
                    </mat-tree-node>
                </mat-tree>
            </ul>
    </ng-template>
</nav>