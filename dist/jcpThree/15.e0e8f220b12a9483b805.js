(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Pe9c:function(t,i,a){"use strict";a.d(i,"a",(function(){return X}));var e=a("ea4N"),o=a("ETwC"),n=a("ZWlK"),r=a("4R65"),s=a("OT7S"),c=a("/ZPT"),h=a("TYT/"),l=a("i+93"),d=a("DUip"),p=a("FfOm"),m=a("uLXW"),u=a("p+mS"),g=a("GsDI"),f=a("XIAg"),b=a("Valr"),v=a("eHTH"),w=a("cSbt");function C(t,i){1&t&&(h.ac(0,"th",31),h.Vc(1," Sector "),h.Zb())}function y(t,i){if(1&t&&(h.ac(0,"td",32),h.Vc(1),h.Zb()),2&t){var a=i.$implicit;h.Db(1),h.Xc(" ",a.sapId," ")}}function x(t,i){1&t&&(h.ac(0,"th",31),h.Vc(1," Azimuth "),h.Zb())}function P(t,i){if(1&t&&(h.ac(0,"mat-form-field",35),h.Vb(1,"input",36),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.wc("value",a.azimuth)}}function G(t,i){if(1&t&&(h.ac(0,"span"),h.Vc(1),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.Wc(a.azimuth)}}function S(t,i){if(1&t&&(h.ac(0,"td",32),h.Tc(1,P,2,1,"mat-form-field",33),h.Tc(2,G,2,1,"span",34),h.Zb()),2&t){var a=h.qc();h.Db(1),h.wc("ngIf","edit"==a.mode),h.Db(1),h.wc("ngIf","view"==a.mode)}}function L(t,i){1&t&&(h.ac(0,"th",31),h.Vc(1," Height "),h.Zb())}function D(t,i){if(1&t&&(h.ac(0,"mat-form-field",35),h.Vb(1,"input",36),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.wc("value",a.height)}}function Z(t,i){if(1&t&&(h.ac(0,"span"),h.Vc(1),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.Wc(a.height)}}function T(t,i){if(1&t&&(h.ac(0,"td",32),h.Tc(1,D,2,1,"mat-form-field",33),h.Tc(2,Z,2,1,"span",34),h.Zb()),2&t){var a=h.qc();h.Db(1),h.wc("ngIf","edit"==a.mode),h.Db(1),h.wc("ngIf","view"==a.mode)}}function R(t,i){1&t&&(h.ac(0,"th",31),h.Vc(1," Power "),h.Zb())}function z(t,i){if(1&t&&(h.ac(0,"mat-form-field",35),h.Vb(1,"input",36),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.wc("value",a.power)}}function V(t,i){if(1&t&&(h.ac(0,"span"),h.Vc(1),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.Wc(a.power)}}function M(t,i){if(1&t&&(h.ac(0,"td",32),h.Tc(1,z,2,1,"mat-form-field",33),h.Tc(2,V,2,1,"span",34),h.Zb()),2&t){var a=h.qc();h.Db(1),h.wc("ngIf","edit"==a.mode),h.Db(1),h.wc("ngIf","view"==a.mode)}}function I(t,i){1&t&&(h.ac(0,"th",31),h.Vc(1," Tilt "),h.Zb())}function k(t,i){if(1&t&&(h.ac(0,"mat-form-field",35),h.Vb(1,"input",36),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.wc("value",a.tilt)}}function F(t,i){if(1&t&&(h.ac(0,"span"),h.Vc(1),h.Zb()),2&t){var a=h.qc().$implicit;h.Db(1),h.Wc(a.tilt)}}function O(t,i){if(1&t&&(h.ac(0,"td",32),h.Tc(1,k,2,1,"mat-form-field",33),h.Tc(2,F,2,1,"span",34),h.Zb()),2&t){var a=h.qc();h.Db(1),h.wc("ngIf","edit"==a.mode),h.Db(1),h.wc("ngIf","view"==a.mode)}}function q(t,i){1&t&&h.Vb(0,"tr",37)}function W(t,i){1&t&&h.Vb(0,"tr",38)}var X=function(){function t(t,i,a,e,o){this.dialogRef=t,this.data=i,this.shapeService=a,this.router=e,this.dialog=o,this.displayedColumnsSitePropsedConfiguration=["sapId","azimuth","height","power","tilt"],this.siteProposedData=[],this.sectorLatLng={},this.createLayer=function(t,i,a,e,o){this.zoomLevel=i,this.sectorLatLng={},this.scaleMatrix=this.zoomLevel<=7?.03:this.zoomLevel<=10?.08:this.zoomLevel<=13?.15:this.zoomLevel<=15?.25:this.zoomLevel<=16?.35:.4,this.scaleMatrix=this.scaleMatrix*this.pixelRatio,null!=this.stageSiteProposedConfiguration&&(this.stageSiteProposedConfiguration.removeAllChildren(),this.stageSiteProposedConfiguration.update()),this.stageSiteProposedConfiguration=new n.Stage(t),this.allSiteContainer=new n.Container,this.stageSiteProposedConfiguration.enableDOMEvents(!0),this.stageSiteProposedConfiguration.enableMouseOver(5e4),this.stageSiteProposedConfiguration.removeAllChildren(),this.sectorLatLng=r.latLng(this.latitude,this.longitude),this.sectorPoint=this.mapSitePrposed.latLngToContainerPoint(this.sectorLatLng),this.sectorCenterPoint={x:this.sectorPoint.x*this.pixelRatio,y:this.sectorPoint.y*this.pixelRatio};var s=new n.Container;this.stageSiteProposedConfiguration.addChild(s);var c=new n.Shadow("rgba(0,0,0,0.2)",1,2,5),h=new n.Container;s.addChild(h),this.sectorContainer=new n.Container,this.sectorContainer.cursor="pointer",this.sectorContainer.x=this.sectorCenterPoint.x,this.sectorContainer.y=this.sectorCenterPoint.y,this.sectorContainer.scaleX=this.scaleMatrix,this.sectorContainer.scaleY=this.scaleMatrix;var l=this.getPointGraphics(this.zoomLevel,"#06C1FF"),d=new n.Shape(l);d.shadow=c,d.cursor="pointer";for(var p=0;p<this.data.sector.length;p++){var m=parseInt(this.data.sector[p].azimuth)-parseInt(this.data.sector[p].horizontalBeamWidth)/2,u=parseInt(this.data.sector[p].azimuth)+parseInt(this.data.sector[p].horizontalBeamWidth)/2,g=this.data.sector[p].color,f=new n.Shape(this.pieGenerator(0,0,m,u,75,15,g,"green",1));f.alpha=.8,f.shadow=c,f.cursor="pointer",f.latlng=this.sectorLatLng,f.sector=this.data.sector[p],f.color=g,this.sectorContainer.addChild(f);var b=new n.Shape(this.pieOverlay(0,0,m-10,u+10,750,150,"#1e88e5","#1e88e5",1));b.alpha=.3,this.sectorContainer.addChild(b);var v=parseInt(this.data.sector[p].azimuth);console.log(this.pixelRatio);var w=this.findNewPoint(this.sectorCenterPoint.x,this.sectorCenterPoint.y,v,790/(this.pixelRatio>1?2:4)),C=this.getLineGraphics(this.sectorCenterPoint.x,this.sectorCenterPoint.y,w.x,w.y),y=new n.Shape(C);h.addChild(y);var x=new n.Text(v+"\xb0","bold "+12*this.pixelRatio+"px Roboto","#000000");x.textAlign="center",x.outline=2,x.rotation=v,x.x=w.x-15*this.pixelRatio,x.y=w.y-15*this.pixelRatio;var P=x.clone();P.shadow=c,P.color="#FFFFFF",h.addChild(x,P)}this.sectorContainer.addChild(d),s.addChild(this.sectorContainer),this.stageSiteProposedConfiguration.update()}}return t.prototype.ngOnInit=function(){this.siteProposedData=this.data.sector,this.latitude=this.data.latitude,this.longitude=this.data.longitude,this.dataSitePropsedConfiguration=new o.o(this.siteProposedData)},t.prototype.closeDialog=function(){this.dialogRef.close(!0)},t.prototype.ngAfterViewInit=function(){this.mapSitePrposed=r.map("mapSitePrposed",{center:[this.latitude,this.longitude],zoomControl:!1,zoom:14}),r.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(this.mapSitePrposed),r.control.zoom({position:"bottomright"}).addTo(this.mapSitePrposed);var t=this;this.siteProposedConfigurationLayer=new s.a({container:document.createElement("canvas")}),this.siteProposedConfigurationLayer.on("layer-render",(function(){var t=this.componentRef=this;this.routeFibreCoreLayerContainer=i.resizeContainer(),i.createLayer(this.routeFibreCoreLayerContainer,this._zoom,this.routePlannedData,t,this._assetQueue)})),this.customControlSitePrposed=r.Control.extend({options:{position:"bottomright"},onAdd:function(i){var a=r.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-custom-count-layers");a.innerHTML=' <div class="tab-container-layersMap2"><div class="icon-count"><span style="font-size: 9px;font-weight: 500;" id="command"></span></div><div class="icon-styleMap2"><i class="ic ic-layers-01"></i></div></div>',a.style.backgroundColor="white",a.style.backgroundSize="38px 38px",a.style.width="38px",a.style.height="38px";var e=this;return a.onclick=function(){return t.dialogRef.close(!0),t.dialog.open(c.a,{width:"470px",panelClass:"material-dialog-container",data:{transferDataPoly:"",headerNominal:!0}}).afterClosed().subscribe((function(i){t.shapeService.mapServiceData=t.mapSitePrposed,t.router.navigate(["/JCP/Layers"]),console.log(t.shapeService)})),e._container=a,e._update(),e._container},this._container=a,this._update(),this._container},onRemove:function(t){},_update:function(){}}),this.mapSitePrposed.addControl(new this.customControlSitePrposed),this.mapSitePrposed.setView(new r.LatLng(this.latitude,this.longitude),14),this.pixelRatio=window.devicePixelRatio||1;var i=this;this.siteProposedConfigurationLayer.addTo(this.mapSitePrposed)},t.prototype.resizeContainer=function(){this.canvasCore=this.siteProposedConfigurationLayer.getContainer();var t=r.Browser.retina?2:1,i=this.siteProposedConfigurationLayer._bounds.getSize();return this.canvasCore.width=t*i.x,this.canvasCore.height=t*i.y,this.canvasCore.style.width=i.x+"px",this.canvasCore.style.height=i.y+"px",this.canvasCore},t.prototype.pieGenerator=function(t,i,a,e,o,r,s,c,h){return this.drawPieGraphic=new n.Graphics,this.drawPieGraphic.setStrokeStyle(h),this.drawPieGraphic.beginFill(s),this.drawPieGraphic.beginStroke(c),this.drawPieGraphic.arc(t,i,o,this.toRad(a),this.toRad(e),!1),this.drawPieGraphic.lineTo(t+Math.cos(this.toRad(e))*r,i+Math.sin(this.toRad(e))*r),this.drawPieGraphic.arc(t,i,r,this.toRad(e),this.toRad(a),!0),this.drawPieGraphic.closePath(),this.drawPieGraphic.endFill(),this.drawPieGraphic},t.prototype.toRad=function(t){return(t-90)*Math.PI/180},t.prototype.getLineGraphics=function(t,i,a,e){var o=Math.atan2(e-i,a-t);return this.drawLineGraphics=new n.Graphics,this.drawLineGraphics.setStrokeStyle(2),this.drawLineGraphics.setStrokeDash([5,5]),this.drawLineGraphics.beginStroke("#000000"),this.drawLineGraphics.moveTo(t,i),this.drawLineGraphics.lineTo(a,e),this.drawLineGraphics.lineTo(a-30*Math.cos(o-Math.PI/6),e-30*Math.sin(o-Math.PI/6)),this.drawLineGraphics.moveTo(a,e),this.drawLineGraphics.lineTo(a-30*Math.cos(o+Math.PI/6),e-30*Math.sin(o+Math.PI/6)),this.drawLineGraphics.endStroke(),this.drawLineGraphics},t.prototype.getPolyGraphics=function(t,i,a){return this.polyGraphics=new n.Graphics,this.polyGraphics.setStrokeStyle(2),this.polyGraphics.beginStroke(i),this.polyGraphics.beginFill(t),this.polyGraphics.drawPolygon(0,0,a),this.polyGraphics},t.prototype.getPointCircleGraphics=function(t,i){return this.pointCircleGraphics=new n.Graphics,this.pointCircleGraphics.setStrokeStyle(1),this.pointCircleGraphics.beginStroke(n.Graphics.getRGB(0,0,0,0)),this.pointCircleGraphics.beginFill(i),this.pointCircleGraphics.drawCircle(0,0,t),this.pointCircleGraphics},t.prototype.getPointGraphics=function(t,i){return this.pointGraphics=new n.Graphics,this.pointGraphics.setStrokeStyle(1),this.pointGraphics.beginStroke(n.Graphics.getRGB(0,0,0)),this.pointGraphics.beginFill(i),this.pointGraphics.drawCircle(0,0,10),this.pointGraphics},t.prototype.pieOverlay=function(t,i,a,e,o,r,s,c,h){return this.pieOverlayGraphics=new n.Graphics,this.pieOverlayGraphics.setStrokeStyle(h),this.pieOverlayGraphics.beginFill(s),this.pieOverlayGraphics.beginStroke(c),this.pieOverlayGraphics.arc(t,i,o,this.toRad(a),this.toRad(e)),this.pieOverlayGraphics.lineTo(t+Math.cos(this.toRad(e))*r,i+Math.sin(this.toRad(e))*r),this.pieOverlayGraphics.arc(t,i,r,this.toRad(e),this.toRad(a),!0),this.pieOverlayGraphics.closePath(),this.pieOverlayGraphics.endFill(),this.pieOverlayGraphics},t.prototype.findNewPoint=function(t,i,a,e){var o={},n=this.toRad(a);return o.x=e*Math.cos(n)+t,o.y=e*Math.sin(n)+i,o},t.\u0275fac=function(i){return new(i||t)(h.Ub(e.g),h.Ub(e.a),h.Ub(l.a),h.Ub(d.b),h.Ub(e.b))},t.\u0275cmp=h.Ob({type:t,selectors:[["app-site-proposed-configuration"]],decls:55,vars:7,consts:[[1,"mat-dialog-container"],[1,"dialog-header"],["fxFlex","grow"],["mat-icon-button","",1,"dialog-close-button",3,"click"],["mat-dialog-content",""],["fxLayout","row"],["fxFlex","55","fxLayout","column",1,"site-proposed-configuration"],["fxLayout","row",1,"lat-long-data"],["fxFlex","3"],["fxFlex","20","fxLayout","column"],[1,"title"],[1,"value"],[1,"site-proposed-configuration-data"],["mat-table","",1,"site-proposed-configuration-table",3,"dataSource"],["matColumnDef","sapId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","azimuth"],["matColumnDef","height"],["matColumnDef","power"],["matColumnDef","tilt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"vertical"],["fxFlex","45"],["id","mapSitePrposed"],["mat-dialog-actions","",1,""],[1,"col"],[1,"mx10"],["mat-stroked-button","","color","primary",1,"buttonWidth",3,"click"],["mat-raised-button","","color","primary",1,"buttonWidth"],["mat-header-cell",""],["mat-cell",""],["floatLabel","never","class","mat-form-datasite",4,"ngIf"],[4,"ngIf"],["floatLabel","never",1,"mat-form-datasite"],["matInput","",3,"value"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(h.ac(0,"div",0),h.ac(1,"mat-toolbar",1),h.ac(2,"mat-toolbar-row"),h.ac(3,"div",2),h.ac(4,"div"),h.Vc(5),h.Zb(),h.Zb(),h.ac(6,"button",3),h.mc("click",(function(){return i.closeDialog()})),h.ac(7,"mat-icon"),h.Vc(8,"close"),h.Zb(),h.Zb(),h.Zb(),h.Zb(),h.ac(9,"div",4),h.ac(10,"div",5),h.ac(11,"div",6),h.ac(12,"div",7),h.Vb(13,"div",8),h.ac(14,"div",9),h.ac(15,"span",10),h.Vc(16,"Latitude"),h.Zb(),h.ac(17,"span",11),h.Vc(18),h.Zb(),h.Zb(),h.ac(19,"div",9),h.ac(20,"span",10),h.Vc(21,"Longitude"),h.Zb(),h.ac(22,"span",11),h.Vc(23),h.Zb(),h.Zb(),h.Zb(),h.ac(24,"div",12),h.ac(25,"table",13),h.Yb(26,14),h.Tc(27,C,2,0,"th",15),h.Tc(28,y,2,1,"td",16),h.Xb(),h.Yb(29,17),h.Tc(30,x,2,0,"th",15),h.Tc(31,S,3,2,"td",16),h.Xb(),h.Yb(32,18),h.Tc(33,L,2,0,"th",15),h.Tc(34,T,3,2,"td",16),h.Xb(),h.Yb(35,19),h.Tc(36,R,2,0,"th",15),h.Tc(37,M,3,2,"td",16),h.Xb(),h.Yb(38,20),h.Tc(39,I,2,0,"th",15),h.Tc(40,O,3,2,"td",16),h.Xb(),h.Tc(41,q,1,0,"tr",21),h.Tc(42,W,1,0,"tr",22),h.Zb(),h.Zb(),h.Zb(),h.Vb(43,"mat-divider",23),h.ac(44,"div",24),h.Vb(45,"div",25),h.Zb(),h.Zb(),h.Zb(),h.Vb(46,"mat-divider"),h.ac(47,"div",26),h.Vb(48,"div",27),h.ac(49,"div",28),h.ac(50,"button",29),h.mc("click",(function(){return i.closeDialog()})),h.Vc(51,"Cancel"),h.Zb(),h.Zb(),h.ac(52,"div",28),h.ac(53,"button",30),h.Vc(54,"Save"),h.Zb(),h.Zb(),h.Zb(),h.Zb()),2&t&&(h.Db(5),h.Xc("Site Proposed Configuration: ",i.data.sapId,""),h.Db(13),h.Wc(i.data.latitude),h.Db(5),h.Wc(i.data.longitude),h.Db(2),h.wc("dataSource",i.dataSitePropsedConfiguration),h.Db(16),h.wc("matHeaderRowDef",i.displayedColumnsSitePropsedConfiguration),h.Db(1),h.wc("matRowDefColumns",i.displayedColumnsSitePropsedConfiguration),h.Db(1),h.wc("vertical",!0))},directives:[p.a,p.c,m.a,u.b,g.a,e.e,m.c,o.n,o.c,o.i,o.b,o.k,o.m,f.a,e.c,o.h,o.a,b.n,v.c,w.b,o.j,o.l],styles:[".mat-dialog-container{padding:0}.mat-dialog-container .dialog-header{height:54px;max-height:54px;min-height:54px;background-color:#0070db}.mat-dialog-container .dialog-header .mat-toolbar-row{font-size:18px;color:#fff}.mat-dialog-container .dialog-header .mat-toolbar-row .dialog-close-button .mat-button-focus-overlay{background-color:rgba(0,0,0,0)!important}.mat-dialog-container .mat-dialog-content{padding:0;margin:0;width:100%;min-height:calc(100% - 108px);max-height:calc(100% - 108px)}.mat-dialog-container .mat-dialog-content .mat-form-field{font-size:14px}.mat-dialog-container .mat-dialog-content tr.mat-row{height:51px!important}.mat-dialog-container .mat-dialog-content .title{font-family:Lato Regular;font-size:12px;opacity:.7}.mat-dialog-container .mat-dialog-content .value{font-family:Lato Medium;font-size:14px}.mat-dialog-container .mat-dialog-content .lat-long-data{padding-top:3%}.mat-dialog-container .mat-dialog-content .site-proposed-configuration-data{height:calc(100% - 109px);overflow:auto}.mat-dialog-container .mat-dialog-content .lat-long-data{height:67px}.mat-dialog-container .mat-dialog-content .mat-form-datasite{width:50px}#mapSitePrposed{height:365px}.tab-container-layersMap2 .icon-styleMap2{font-size:25px;padding:3px 7px;line-height:1.5;width:38px;height:38px;border-radius:25px;color:#707070}.p15{padding:15px}.mr20{margin-right:20px}.mx10{margin:0 10px}.target-title{font-size:14px;font-family:Lato Medium;font-weight:700}.optimization-target{padding-left:20px}"],encapsulation:2}),t}()}}]);